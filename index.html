<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> FoundDB </title> <meta name="author" content="University of Technology Nuremberg"> <meta name="description" content="&lt;p&gt; Modern cloud-based data analytics systems must efficiently process petabytes of data residing on cloud storage. A key optimization technique in state-of-the-art systems like Snowflake is partition pruning—skipping chunks of data that do not contain relevant information for computing query results. &lt;/p&gt; &lt;p&gt; While partition pruning based on query predicates is a well-established technique, we demonstrate that its scope can be extended to &lt;code&gt;LIMIT&lt;/code&gt;, top-k, and &lt;code&gt;JOIN&lt;/code&gt; operations, dramatically expanding the opportunities for pruning across diverse query types. &lt;/p&gt; &lt;p&gt; Our analysis of Snowflake's production workloads reveals that real-world analytical queries exhibit much higher selectivity than commonly assumed, yielding effective partition pruning. We show that we can harness high selectivity by utilizing only min/max metadata available in modern data analytics systems and data lake formats like Apache Iceberg, reducing the number of processed micro-partitions by 99.4%. &lt;/p&gt;"> <meta name="keywords" content="Snowflake, Databases, Data Skipping, Pruning"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://founddb.github.io/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <span class="d-block text-muted text-center fst-italic mt-4 mb-2">Published in: Proceedings of the 2025 ACM SIGMOD International Conference on Management of Data</span> <h1 class="post-title" itemprop="headline">FoundDB: Foundation Models for Database Systems</h1> </header> <style>.paper-author-list{display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:baseline;gap:1em 10px;margin-top:1em;margin-bottom:1.5em;max-width:7in}.paper-author{flex:1 1 215px;text-align:center;line-height:1.2em}</style> <div class="d-flex justify-content-center"> <div class="paper-author-list"> <div class="paper-author"> <a href="https://www.linkedin.com/in/andi-zimmerer/" target="_blank" rel="noopener noreferrer"> <span class="d-block strong">Andreas Zimmerer</span> <span class="d-block small">University of Technology Nuremberg</span> <span class="d-block small">Nuremberg, Germany</span> </a> </div> <div class="paper-author"> <a href="https://www.linkedin.com/in/damien-dam/" target="_blank" rel="noopener noreferrer"> <span class="d-block strong">Damien Dam</span> <span class="d-block small">Snowflake Inc.</span> <span class="d-block small">Berlin, Germany</span> </a> </div> <div class="paper-author"> <a href="https://scholar.google.de/citations?hl=en&amp;user=nIYiva8AAAAJ" target="_blank" rel="noopener noreferrer"> <span class="d-block strong">Jan Kossmann</span> <span class="d-block small">Snowflake Inc.</span> <span class="d-block small">Berlin, Germany</span> </a> </div> <div class="paper-author"> <a href="https://www.linkedin.com/in/juliane-waack-327171202/" target="_blank" rel="noopener noreferrer"> <span class="d-block strong">Juliane Waack</span> <span class="d-block small">Snowflake Inc.</span> <span class="d-block small">Berlin, Germany</span> </a> </div> <div class="paper-author"> <a href="https://scholar.google.de/citations?hl=en&amp;user=QmwXUf4AAAAJ" target="_blank" rel="noopener noreferrer"> <span class="d-block strong">Ismail Oukid</span> <span class="d-block small">Snowflake Inc.</span> <span class="d-block small">Berlin, Germany</span> </a> </div> <div class="paper-author"> <a href="https://scholar.google.de/citations?hl=en&amp;user=y3IdRusAAAAJ" target="_blank" rel="noopener noreferrer"> <span class="d-block strong">Andreas Kipf</span> <span class="d-block small">University of Technology Nuremberg</span> <span class="d-block small">Nuremberg, Germany</span> </a> </div> </div> </div> <div class="d-flex justify-content-center flex-wrap gap-2 pt-1 pb-5"> <a href="https://arxiv.org/pdf/2504.11540" class="btn btn-blue btn-sm rounded-pill px-3" rel="external nofollow noopener" target="_blank"><i class="fa-solid fa-download mr-2"></i>PDF</a> <a href="https://arxiv.org/abs/2504.11540" class="btn btn-blue btn-sm rounded-pill px-3" rel="external nofollow noopener" target="_blank"><i class="ai ai-arxiv mr-2"></i>arXiv</a> <a href="#cite" class="btn btn-blue btn-sm rounded-pill px-3"><i class="fa-solid fa-quote-left mr-2"></i>Cite</a> </div> <article> <div class="d-flex justify-content-center"> <div class="w-75 mb-5" style="text-align: justify;"> <h2>Abstract</h2> <p> Modern cloud-based data analytics systems must efficiently process petabytes of data residing on cloud storage. A key optimization technique in state-of-the-art systems like Snowflake is partition pruning—skipping chunks of data that do not contain relevant information for computing query results. </p> <p> While partition pruning based on query predicates is a well-established technique, we demonstrate that its scope can be extended to <code>LIMIT</code>, top-k, and <code>JOIN</code> operations, dramatically expanding the opportunities for pruning across diverse query types. </p> <p> Our analysis of Snowflake's production workloads reveals that real-world analytical queries exhibit much higher selectivity than commonly assumed, yielding effective partition pruning. We show that we can harness high selectivity by utilizing only min/max metadata available in modern data analytics systems and data lake formats like Apache Iceberg, reducing the number of processed micro-partitions by 99.4%. </p> </div> </div> <h2>Highlights</h2> <p>We presented four data pruning techniques that are used in the Snowflake data platform and evaluated them based on their pruning effectiveness on real-world customer workloads. The pruning flow is as follows:</p> <ol> <li>First, all queries containing a <code>WHERE</code> predicate are subject to <em>filter pruning</em>, which removes data partitions by identifying the ones that do not contain any rows that would match the filter condition in the <code>WHERE</code> clause.</li> <li>If the query is a simple <code>LIMIT</code> query without an <code>ORDER BY</code>, the query engine tries to reduce the number of partitions to the minimally necessary set of partitions such that the query result can be computed. This works for queries with and without <code>WHERE</code> clause.</li> <li>While executing a join, the probe side of a join is subject to <em>join pruning</em>, i.e., removing partitions from the probe side that do not contain join partners based on the collected values from the build side.</li> <li>Lastly, if a query is a top-k query, i.e., it contains an <code>ORDER BY ... LIMIT</code>, a specialized <em>top-k pruning</em> technique attempts to reduce the number of processed partitions by pushing runtime information about the current top-k heap down to the table scan.</li> </ol> <p>While the first two techniques can be applied during query optimization, the latter two techniques require runtime information about the current state of the query execution.</p> <h2>Related Links</h2> <ul> <li>The blog series "<a href="https://www.snowflake.com/en/blog/super-fast-top-k-queries/" rel="external nofollow noopener" target="_blank">Say Hello to Superfast Top‑K Queries in Snowflake</a>", "<a href="https://www.snowflake.com/en/blog/continued-investments-in-price-performance-and-faster-top-k-queries/" rel="external nofollow noopener" target="_blank">Continued Investments in Price Performance and Faster Top‑K Queries</a>", and "<a href="https://www.snowflake.com/en/engineering-blog/optimizing-top-k-aggregation-snowflake/" rel="external nofollow noopener" target="_blank">Reimagining Top‑K Aggregation Optimization at Snowflake</a>" focuses on optimizations regarding pruning capabilities of Top‑K queries in Snowflake.</li> <li>The blog post "<a href="https://www.snowflake.com/en/engineering-blog/iceberg-data-pruning/" rel="external nofollow noopener" target="_blank">Pruning for Iceberg: 90% of an Iceberg Is Underwater</a>" elaborates on pruning in Snowflake on Apache Iceberg tables.</li> </ul> <h2>Follow-Up Work and Scientific Discourse</h2> No follow-up work has been published yet. Please reach out to the main author of this paper if you think your work should be included here. </article> <div id="cite" class="mt-5"> <h2>Cite this Paper</h2> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">zimmerer2025pruning</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Pruning in Snowflake: Working Smarter, Not Harder}</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Zimmerer, Andreas and Dam, Damien and Kossmann, Jan and Waack, Juliane and Oukid, Ismail and Kipf, Andreas}</span><span class="p">,</span>
  <span class="na">journal</span> <span class="p">=</span> <span class="s">{arXiv preprint arXiv:2504.11540}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2025}</span><span class="p">,</span>
  <span class="na">doi</span> <span class="p">=</span> <span class="s">{10.1145/3722212.3724447}</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 University of Technology Nuremberg. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>